<element name="b-tabs" attributes="selected">
    <style>
        b-tabs {
            display: block;
            border-bottom: 1px solid #ccc;
        }
        .b-tabs-hidden {
            display: none;
        }
    </style>
    <script>
        (function(){
            var HIDDEN_CLASS = 'b-tabs-hidden';

            Bosonic.register({
                mixins: [Bosonic.Selection],

                listeners: {
                    'click': 'clickHandler'
                },

                keyBindings: {
                    'left up': 'selectPreviousItem',
                    'right down': 'selectNextItem'
                },

                elementRole: 'tablist',
                elementLabel: 'Tabs',
                contentsRole: 'tabpanel',
                tabsRole: 'tab',

                createdCallback: function() {
                    this.hideAllContents();
                    this.handleAria();
                    if (!this.hasAttribute('selected')) {
                        this.selectFirst();
                    } else {
                        this.applySelection(this.selectedItem);
                    }
                },

                handleAria: function() {
                    this.setAttribute('role', this.elementRole);
                    this.setAttribute('aria-label', this.elementLabel);

                    this.getTabs().forEach(function(tab, index) {
                        tab.tabIndex = -1;
                        tab.setAttribute('role', this.tabsRole);
                        tab.setAttribute('aria-selected', 'false');
                        var content = this.getTabContent(tab);
                        if (content) {
                            if (!content.id) content.id = 'tab-content-' + index; // should not happen...
                            tab.setAttribute('aria-controls', content.id);
                            content.setAttribute('role', this.contentsRole);
                        }
                    }, this);
                },

                clickHandler: function(e) {
                    var itemIndex =  this.getItems().indexOf(e.target);
                    if (itemIndex !== -1) {
                        this.select(itemIndex);
                    }
                },

                selectedChanged: function (oldValue, newValue) {
                    var oldTab = this.getTab(oldValue), 
                        newTab = this.getTab(newValue);
                    if (oldTab !== null) {
                        this.applyDeselection(oldTab);
                    }
                    if (newTab !== null) {
                        this.applySelection(newTab, oldTab && oldTab.hasFocus());
                    }
                },

                applySelection: function(tab, mustFocus) {
                    if (mustFocus) tab.focus();
                    tab.classList.add('active');
                    tab.tabIndex = 0;
                    tab.setAttribute('aria-selected', 'true');
                    this.toggleTabContent(tab);
                },

                applyDeselection: function(tab) {
                    tab.classList.remove('active');
                    tab.tabIndex = -1;
                    tab.setAttribute('aria-selected', 'false');
                    this.toggleTabContent(tab);
                },

                getTabs: function() {
                    return this.getItems();
                },

                getTab: function(index) {
                    return this.getItem(index);
                },

                hideAllContents: function() {
                    this.getAllTabContents().forEach(function(elt) {
                        if (elt) elt.classList.add(HIDDEN_CLASS);
                    });
                },

                getAllTabContents: function() {
                    return this.getTabs().map(function(tab) {
                        return this.getTabContent(tab);
                    }, this);
                },

                getTabContent: function(tabElt) {
                    if (!tabElt.hasAttribute('for')) return null;
                    return document.getElementById(tabElt.getAttribute('for'));
                },

                toggleTabContent: function(tabElt) {
                    var content = this.getTabContent(tabElt);
                    if (content) content.classList.toggle(HIDDEN_CLASS);
                }
            });
        })();
    </script>
</element>
<element name="b-tab">
    <style>
        b-tab {
            display: inline-block;
            cursor: default;
            padding: 10px;
            margin-right: 2px;
            margin-bottom: -1px;
            background-color: #fff;
            border: 1px solid transparent;
            border-bottom-color: #ccc;
        }
        b-tab:hover {
            background-color: #ddd;
        }
        b-tab.active {
            background-color: #fff;
            border: 1px solid #ccc;
            border-bottom-color: transparent;
        }
    </style>
    <script>
        (function(){
            Bosonic.register({
                hasFocus: function() {
                    return this === document.activeElement;
                }
            });
        })();
    </script>
</element>